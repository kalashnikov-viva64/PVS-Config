<cb:config-template xmlns:cb="urn:ccnet.config.builder">

	<cb:define name="template_of_Dalet_Build">
		<project name="$(Proj_ProjectName)" queuePriority="4" queue="Q1">
			<triggers>
				<cb:ifdef name="Proj_ScheduleTime">
					<scheduleTrigger time="$(Proj_ScheduleTime)" buildCondition="ForceBuild"/>
				</cb:ifdef>
			</triggers>
			<tasks>
				<exec>
					<description>KillProcesses.bat</description>
					<executable>C:\PVS-Config\PVS-Studio\KillProcesses.bat</executable>
					<buildArgs></buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>1800</buildTimeoutSeconds>
					<successExitCodes>0</successExitCodes>
				</exec>
				<cb:ifdef name="Proj_DefSvnUpdate">
					<exec>
						<description>SvnUpdate.bat</description>
						<executable>C:\PVS-Config\CC.Net\SvnUpdate.bat</executable>
						<buildArgs></buildArgs>
						<baseDirectory>C:\</baseDirectory>
						<buildTimeoutSeconds>10800</buildTimeoutSeconds>
						<successExitCodes>0</successExitCodes>
					</exec>
				</cb:ifdef>
				<exec>
					<executable>C:\Windows\System32\cmd.exe</executable>
					<cb:ifdef name="Proj_DefRelease_x64">
						<description>buildcppreleasex64.bat</description>
						<buildArgs>/c C:\ccscripts\buildcppreleasex64.bat</buildArgs>
					</cb:ifdef>
					<cb:ifdef name="Proj_DefDebug_x64">
						<description>buildcppdebugx64.bat</description>
						<buildArgs>/c C:\ccscripts\buildcppdebugx64.bat</buildArgs>
					</cb:ifdef>
					<baseDirectory>S:\src\env</baseDirectory>
					<buildTimeoutSeconds>100500</buildTimeoutSeconds>
					<successExitCodes>0</successExitCodes>
				</exec>
			</tasks>
		</project>
	</cb:define>

	<cb:define name="template_of_PVS_Analyse">
		<project name="$(Proj_ProjectName)" queuePriority="2" queue="Q1">
			<triggers>
				<cb:ifdef name="Proj_ScheduleTime">
					<scheduleTrigger time="$(Proj_ScheduleTime)" buildCondition="ForceBuild"/>
				</cb:ifdef>
			</triggers>
			<labeller type="dateLabeller" />
			<tasks>
				<exec>
					<description>KillProcesses.bat</description>
					<executable>C:\PVS-Config\PVS-Studio\KillProcesses.bat</executable>
					<buildArgs></buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>1800</buildTimeoutSeconds>
					<successExitCodes>0</successExitCodes>
				</exec>
				<cb:ifdef name="Proj_DefSvnUpdate">
					<exec>
						<description>SvnUpdate.bat</description>
						<executable>C:\PVS-Config\CC.Net\SvnUpdate.bat</executable>
						<buildArgs></buildArgs>
						<baseDirectory>C:\</baseDirectory>
						<buildTimeoutSeconds>10800</buildTimeoutSeconds>
						<successExitCodes>0</successExitCodes>
					</exec>
				</cb:ifdef>
				<exec>
					<description>PrepareWorkspace.bat</description>
					<executable>C:\PVS-Config\CC.Net\PrepareWorkspace.bat</executable>
					<buildArgs>$(Proj_Platform) $(Proj_IncrediBuild) $(Proj_Team)</buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>1800</buildTimeoutSeconds>
					<successExitCodes>0</successExitCodes>
				</exec>
				<exec>
					<description>Analyse.bat</description>
					<executable>C:\PVS-Config\CC.Net\Analyse.bat</executable>
					<buildArgs>$(Proj_Platform) $(Proj_IncrediBuild) "$(Proj_RootFolder)\temp"</buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>72000</buildTimeoutSeconds>
					<successExitCodes>0</successExitCodes>
				</exec>
			</tasks>
			<publishers>
				<exec>
					<description>PublishingResults.bat</description>
					<executable>C:\PVS-Config\CC.Net\PublishingResults.bat</executable>
					<buildArgs>$(Proj_Platform) "$(Proj_RootFolder)\temp" $(Proj_Team)</buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>14400</buildTimeoutSeconds>
				</exec>
				<merge>
					<files>
						<file>$(Proj_RootFolder)\temp\$(Proj_PlogFile)_totals.txt</file>
						<file>$(Proj_RootFolder)\temp\$(Proj_PlogFile).txt</file>
					</files>
				</merge>
				<xmllogger />
				<exec>
					<description>ClearWorkspace.bat</description>
					<executable>C:\PVS-Config\CC.Net\ClearWorkspace.bat</executable>
					<buildArgs>$(Proj_Platform)</buildArgs>
					<baseDirectory>C:\</baseDirectory>
					<buildTimeoutSeconds>1800</buildTimeoutSeconds>
				</exec>
				<buildpublisher>
					<sourceDir>$(Proj_RootFolder)\temp</sourceDir>
					<publishDir>$(Proj_RootFolder)</publishDir>
					<useLabelSubDirectory>true</useLabelSubDirectory>
					<alwaysPublish>true</alwaysPublish>
				</buildpublisher>
				<exec>
					<executable>C:\Windows\System32\cmd.exe</executable>
					<description>delete temp folder</description>
					<buildArgs>/c del /Q temp</buildArgs>
					<baseDirectory>$(Proj_RootFolder)</baseDirectory>
					<buildTimeoutSeconds>300</buildTimeoutSeconds>
				</exec>
			</publishers>
		</project>
	</cb:define>
</cb:config-template>